<!DOCTYPE html>
<html>
<head>
<script src="scripts/js/angular-1.3.16.js"></script>

</head>
<h1 id="services" class="ng-scope">Services</h1>
<p class="ng-scope">Angular services are substitutable objects that are wired together using dependency
injection (DI). You can use services to organize and share code across your app.</p>
<p class="ng-scope">Angular services are:</p>
<ul class="ng-scope">
<li>Lazily instantiated ==> Angular only instantiates a service when an application component depends
on it.</li>
<li>Singletons ==> Each component dependent on a service gets a reference to the single instance
generated by the service factory.</li>
</ul>
<p class="ng-scope">Angular offers several useful services (like <code><span class="pln">$http</span></code>), but for most applications
you'll also want to create your own.</p>
<br>
<p>There are two ways to create a service.</p>
<ul class="list">
<li><p>factory</p></li>
<li><p>service</p></li>
</ul>

Example :<hr>
<body ng-app="myapp">
    <div ng-controller="MyController">
    Num1: <input type="number" ng-model="num1" /><br>
    Num2: <input type="number" ng-model="num2" /><br><br>
    
    <button ng-click="getSum()">Get Sum</button>
    
    Sum:{{sum}}
    
    <br><br>
    Num3: <input type="number" ng-model="num3" /><br><br>
    <button ng-click="getSquare()">Get Square</button>
    
    Square:{{square}}
    
    <br><br>
    
    <h3><i>$http service example</i></h3>
    Enter User Id : <input type="text" ng-model="userid">
    <button ng-click="myData.getDetails()">Get User details</button>
    <br/>
    User details are<br/>
    <span>First Name: <b>{{user.firstname}}</b></span><br/>
    <span>Last Name:  <b>{{user.lastname}}</b></span><br/>
    <span>Object : 	 <b>{{user}}</b></span> 
    </div>
    
    <script>
    
    var module = angular.module("myapp", ['mathapp']);
    module.controller("MyController", function ($scope, MathService, CalculatorService, $http) {
    	$scope.myData = {};
    	
    	$scope.getSum = function() {
    		$scope.sum = MathService.add($scope.num1, $scope.num2);
    	}
    	
    	$scope.getSquare = function() {
    		$scope.square = CalculatorService.square($scope.num3);
    	}
    	
    	 
         $scope.user = {};
         $scope.myData.getDetails = function(){
       	  var promiseObj = $http.get("UserDetails.jsp", {params : {id : $scope.userid}});
       	  promiseObj.success(function(data, status, headers, config){
       		 $scope.user.firstname = data.firstname; 
       		 $scope.user.lastname = data.lastname; 
       	  });
         };
    	
    });
    
    var mathapp = angular.module("mathapp", []);
    
    mathapp.service("MathService", function(){
    	this.add = function(num1, num2) {
    		return num1 + num2;
    	}
    	this.multiply = function(num1, num2) {
    		return num1*num2;
    	}
    });
    
    mathapp.service("CalculatorService", function(MathService){
    	this.square = function(num) {
    		return MathService.multiply(num, num);
    	}
    });
    </script>
</body>
</html>
